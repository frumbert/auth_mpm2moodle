<?php
    global $OUTPUT;
    // set to defaults if undefined
    if (!isset($config->sharedsecret)) {
        $config->sharedsecret = 'this is not a secure key, change it';
    }

    if (!isset($config->timeout)) {
        $config->timeout = '5';
    }

    if (!isset($config->logoffurl)) {
        $config->logoffurl = '';
    }

    if (!isset($config->entryurl)) {
        $config->entryurl = '/my/';
    }

    if (!isset($config->autoopen)) {
    	$config->autoopen = 'no';
    }

    if (!isset($config->updateuser)) {
    	$config->updateuser = 'yes';
    }

    if (!isset($config->firstname)) {
        $config->firstname = 'no-first-name';
    }

    if (!isset($config->lastname)) {
        $config->lastname = 'no-last-name';
    }

    if (!isset($config->roleNames)) {
        $config->roleNames = 'Reception/Admin, Nurse, Practice Manager, Allied Health, Registrar, Junior Doctor';
    }

    if (!isset($config->managerRoleName)) {
        $config->managerRoleName = 'Practice Manager';
    }

    if (!isset($config->managerEnrolAsTeacher)) {
        $config->managerEnrolAsTeacher = false;
    }

?>
<table cellspacing="0" cellpadding="5" border="0">

<tr valign="top" class="required">
    <td align="right"><label for="sharedsecret"><?php print_string("auth_mpm2moodle_secretkey", "auth_mpm2moodle") ?></label></td>
    <td>
        <input id="sharedsecret" name="sharedsecret" type="text" size="30" value="<?php echo $config->sharedsecret?>" />
        <?php

        if (isset($err["sharedsecret"])) {
            echo $OUTPUT->error_text($err["sharedsecret"]);
        }

        ?>
    </td>
    <td><?php print_string("auth_mpm2moodle_secretkey_desc", "auth_mpm2moodle") ?></td>
</tr>

<tr valign="top" class="required">
    <td align="right"><label for="timeout"><?php print_string("auth_mpm2moodle_timeout", "auth_mpm2moodle") ?></label></td>
    <td>
        <input id="timeout" name="timeout" type="text" size="3" maxlength="3" value="<?php echo $config->timeout?>" />
        <?php

        if (isset($err["timeout"])) {
            echo $OUTPUT->error_text($err["timeout"]);
        }

        ?>
    </td>
    <td><?php print_string("auth_mpm2moodle_timeout_desc", "auth_mpm2moodle") ?></td>
</tr>

<tr valign="top" class="">
    <td align="right"><label for="logoffurl"><?php print_string("auth_mpm2moodle_logoffurl", "auth_mpm2moodle") ?></label></td>
    <td>
        <input id="logoffurl" name="logoffurl" type="text" size="30" value="<?php echo $config->logoffurl?>" />
        <?php

        if (isset($err["logoffurl"])) {
            echo $OUTPUT->error_text($err["logoffurl"]);
        }

        ?>
    </td>
    <td><?php print_string("auth_mpm2moodle_logoffurl_desc", "auth_mpm2moodle") ?></td>
</tr>

<tr valign="top" class="">
    <td align="right"><label for="entryurl"><?php print_string("auth_mpm2moodle_entryurl", "auth_mpm2moodle") ?></label></td>
    <td>
        <input id="entryurl" name="entryurl" type="text" size="30" value="<?php echo $config->entryurl?>" />
        <?php

        if (isset($err["entryurl"])) {
            echo $OUTPUT->error_text($err["entryurl"]);
        }

        ?>
    </td>
    <td><?php print_string("auth_mpm2moodle_entryurl_desc", "auth_mpm2moodle") ?></td>
</tr>

<tr valign="top" class="">
    <td align="right"><label for="updateuser"><?php print_string("auth_mpm2moodle_updateuser", "auth_mpm2moodle") ?></label></td>
    <td>
    	<select id="updateuser" name="updateuser">
    		<option value='yes'<?php if ($config->updateuser=='yes') { echo "selected-'selected'"; } ?>><?php echo get_string('yes') ?></option>
    		<option value='no'<?php if ($config->updateuser!='yes') { echo "selected='selected'"; } ?>><?php echo get_string('no') ?></option>
    	</select>
    	<?php
	        if (isset($err["updateuser"])) {
	            echo $OUTPUT->error_text($err["updateuser"]);
	        }
        ?>
    </td>
    <td><?php print_string("auth_mpm2moodle_updateuser_desc", "auth_mpm2moodle") ?></td>
</tr>

<tr valign="top" class="required">
    <td align="right"><label for="firstname"><?php print_string("auth_mpm2moodle_firstname", "auth_mpm2moodle") ?></label></td>
    <td>
        <input id="firstname" name="firstname" type="text" size="30" value="<?php echo $config->firstname?>" />
    </td>
    <td><?php print_string("auth_mpm2moodle_firstname_desc", "auth_mpm2moodle") ?></td>
</tr>

<tr valign="top" class="required">
    <td align="right"><label for="lastname"><?php print_string("auth_mpm2moodle_lastname", "auth_mpm2moodle") ?></label></td>
    <td>
        <input id="firstname" name="lastname" type="text" size="30" value="<?php echo $config->lastname?>" />
    </td>
    <td><?php print_string("auth_mpm2moodle_lastname_desc", "auth_mpm2moodle") ?></td>
</tr>

<tr valign="top" class="required">
    <td align="right"><label for="managerRoleName"><?php print_string("auth_mpm2moodle_managerRoleName", "auth_mpm2moodle") ?></label></td>
    <td>
        <input id="managerRoleName" name="managerRoleName" type="text" size="30" value="<?php echo $config->managerRoleName?>" />
    </td>
    <td><?php print_string("auth_mpm2moodle_managerRoleName_desc", "auth_mpm2moodle") ?></td>
</tr>

<tr valign="top" class="required">
    <td align="right"><label for="roleNames"><?php print_string("auth_mpm2moodle_roleNames", "auth_mpm2moodle") ?></label></td>
    <td>
        <input id="roleNames" name="roleNames" type="text" size="30" value="<?php echo $config->roleNames?>" />
    </td>
    <td><?php print_string("auth_mpm2moodle_roleNames_desc", "auth_mpm2moodle") ?></td>
</tr>

<tr valign="top" class="required">
    <td align="right"><label for="managerEnrolAsTeacher"><?php print_string("auth_mpm2moodle_enrolAsTeacher", "auth_mpm2moodle") ?></label></td>
    <td>
        <input id="managerEnrolAsTeacher" name="managerEnrolAsTeacher" type="checkbox" value="1"<?php if ($config->managerEnrolAsTeacher) { echo " checked='checked'"; } ?>/>
    </td>
    <td><?php print_string("auth_mpm2moodle_enrolAsTeacher_desc", "auth_mpm2moodle") ?></td>
</tr>

</table>
